From 0ebce712beea0e1f6ee0dfcbb22bee90906c1f3a Mon Sep 17 00:00:00 2001
From: Carlos Alberto Petry <carlos.petry@ic.unicamp.br>
Date: Mon, 31 Aug 2015 12:07:08 -0300
Subject: [PATCH 4/7] Updated SysemC backend: fix generation of no decoupled
 modules code

---
 src/main/scala/SysC.scala | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/src/main/scala/SysC.scala b/src/main/scala/SysC.scala
index e1c8f39..17b8301 100644
--- a/src/main/scala/SysC.scala
+++ b/src/main/scala/SysC.scala
@@ -51,6 +51,7 @@ class SysCBackend extends CppBackend {
               val vtype = "dat_t<" + bits.width + ">" // direct use of width here?
               val entry = new CEntry(name, is_input, vtype, bits.width, bits.name, delt.ready.name, delt.valid.name)
               cdef.entries += (entry)
+			  cdef.valid_ready = true
             }
             case aggregate: Aggregate => {
               // Collect all the inputs and outputs.
@@ -76,6 +77,7 @@ class SysCBackend extends CppBackend {
                 //cdef.structs(aName) = new CStruct(aName, outputs)
                 //val entry = new CEntry(name, false, aName, 1, aggregate.name, delt.ready.name, delt.valid.name)
               }
+			  cdef.valid_ready = true
             }
             case _ => badElements(name) = elt
           }
@@ -85,6 +87,7 @@ class SysCBackend extends CppBackend {
           val vtype = "dat_t<" + bits.width + ">" // direct use of width here?
           val entry = new CEntry(name, is_input, vtype, bits.width, bits.name, "ready", "valid")
           cdef.entries += (entry)
+		  cdef.valid_ready = false
         }
         case _ => badElements(name) = elt
       }
-- 
2.1.0

